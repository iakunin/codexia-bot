apply-backend:
	kubectl apply -f 01-namespace.yml && \
	kubectl create secret generic spring-datasource \
	--from-env-file backend/secret/spring-datasource.txt \
	--namespace=codexia-bot --dry-run -o yaml | kubectl apply -f - --namespace=codexia-bot
	kubectl create secret generic app \
	--from-env-file backend/secret/app.txt \
	--namespace=codexia-bot --dry-run -o yaml | kubectl apply -f - --namespace=codexia-bot && \
	kubectl apply -f backend/

delete-backend:
	kubectl delete -f backend/ && \
	kubectl delete secret spring-datasource --namespace=codexia-bot && \
	kubectl delete secret app --namespace=codexia-bot && \
	kubectl delete -f 01-namespace.yml
